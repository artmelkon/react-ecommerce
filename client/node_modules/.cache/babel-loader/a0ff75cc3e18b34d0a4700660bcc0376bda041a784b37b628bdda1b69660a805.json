{"ast":null,"code":"const storeCartItems = cartItems => {\n  const cart = cartItems.length > 0 ? cartItems : [];\n  localStorage.setItem('cart', JSON.stringify(cart));\n};\nexport const sumItems = cartItems => {\n  storeCartItems(cartItems);\n  return {\n    itemCount: cartItems.reduce((total, prod) => total + prod.quantity, 0),\n    total: cartItems.reduce((total, prod) => total + prod.price * prod.quantity, 0)\n  };\n};\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_ITEM':\n      // check if item is in the cart\n      if (!state.cartItems.find(item => item.id === action.payload.id)) {\n        state.cartItems.push({\n          ...action.payload,\n          quantity: 1\n        });\n      }\n      return {\n        ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n    case 'INCREASE':\n      // if item already in the care increment quantity\n      const increaseIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n      state.cartItems[increaseIndex].quantity++;\n      return {\n        ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n    case 'DECREASE':\n      // reduce count of existing product\n      const decreaseIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n      if (state.cartItems[decreaseIndex].quantity > 1) state.cartItems[decreaseIndex].quantity--;\n      return {\n        ...state,\n        cartItems: [...state.cartItems],\n        ...sumItems(state.cartItems)\n      };\n    case 'REMOVE_ITEM':\n      const filteredCartItems = state.cartItems.filter(item => item.id !== action.payload.id);\n      return {\n        ...state,\n        cartItems: [...filteredCartItems],\n        ...sumItems(filteredCartItems)\n      };\n    case 'CLEAR':\n      localStorage.removeItem('cart');\n      return {\n        cartItems: [],\n        itemCount: 0,\n        total: 0\n      };\n    default:\n      return state;\n  }\n};\nexport default cartReducer;","map":{"version":3,"names":["storeCartItems","cartItems","cart","length","localStorage","setItem","JSON","stringify","sumItems","itemCount","reduce","total","prod","quantity","price","cartReducer","state","action","type","find","item","id","payload","push","increaseIndex","findIndex","decreaseIndex","filteredCartItems","filter","removeItem"],"sources":["/Users/arthurmelkonyan/webdev/react-ecommerce/client/src/context/cart-reducer.js"],"sourcesContent":["const storeCartItems = (cartItems) => {\n  const cart = cartItems.length > 0 ? cartItems : [];\n  localStorage.setItem('cart', JSON.stringify(cart));\n}\n\nexport const sumItems = cartItems => {\n  storeCartItems(cartItems)\n\n  return {\n    itemCount: cartItems.reduce((total, prod) => total + prod.quantity, 0),\n    total: cartItems.reduce((total, prod) => total + (prod.price * prod.quantity), 0)\n  }\n}\n\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_ITEM':\n      // check if item is in the cart\n      if (!state.cartItems.find(item => item.id === action.payload.id)) { state.cartItems.push({ ...action.payload, quantity: 1 }) }\n      return { ...state, cartItems: [...state.cartItems], ...sumItems(state.cartItems) };\n    case 'INCREASE':\n      // if item already in the care increment quantity\n      const increaseIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n      state.cartItems[increaseIndex].quantity++;\n      return { ...state, cartItems: [...state.cartItems], ...sumItems(state.cartItems) };\n    case 'DECREASE':\n      // reduce count of existing product\n      const decreaseIndex = state.cartItems.findIndex(item => item.id === action.payload.id);\n      if (state.cartItems[decreaseIndex].quantity > 1) state.cartItems[decreaseIndex].quantity--;\n      return { ...state, cartItems: [...state.cartItems], ...sumItems(state.cartItems) };\n    case 'REMOVE_ITEM':\n      const filteredCartItems = state.cartItems.filter(item => item.id !== action.payload.id);\n      return { ...state, cartItems: [...filteredCartItems], ...sumItems(filteredCartItems) };\n    case 'CLEAR':\n      localStorage.removeItem('cart')\n      return { cartItems: [], itemCount: 0, total: 0 }\n    default:\n      return state;\n  }\n}\n\nexport default cartReducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}